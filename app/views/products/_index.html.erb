<!-- This page will show all product records -->
<% @products=Product.all %>
<div class="container" style="margin-top: 75px;">
<%= button_to 'Add New Product', new_product_path ,:method=> :get,:remote=>true, :class=>"btn btn-primary"%>
<div class="row">
   <div class="col-md-12">
      <div class="" style="background-color: #424242; height: 40px; margin-top: 20px;">
        <h2 class="header" style="background-color: #424242; height: 38px;">
          <span style="text-transform: uppercase; font-size: 16px; color: #ffffff; margin-left: 10px;">Listing Product</span>
          <span style="font-size: 14px; color: #ffffff; margin-right: 10px; float: right; margin-top: 12px;"></span>
        </h2>
      </div>
      <table class="table table-striped">
        <thead>
          <tr>
            <th>Category</th>
            <th>Product Name</th>
            <th>Description</th>
            <th>Price</th>
            <th>Stock</th>
            <th>Image</th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
        </thead>

        <!-- Here it will display all products which contain in @products -->
        <tbody>
          <% @products.each do |product| %>
            <tr>
              <td><%= product.category.name %></td>
              <td><%= product.name %></td>
              <td><%= product.description %></td>
              <td><%= product.price %></td>
              <td><%= ProductDetail.where(:product_id=>product.id, available: 1).count  %> </td>
              <td> <img src="<%= product.image %>" style="height:50px;width:50px;" alt="product image"/></td>
              <td><%= link_to 'Show', product, :class=>"mrg_left", :remote=>true %></td>
              <td><%= link_to '', edit_product_path(product), :class=>"glyphicon glyphicon-edit", :title=>"edit", :remote=>true %></td>
              <td><%= link_to '', product, method: :delete,:remote=>true, data: { confirm: 'Are you sure?' }, :class=>"glyphicon glyphicon-trash",:title=>"delete" %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
    <div class="col-md-2"></div>
  </div>
</div>