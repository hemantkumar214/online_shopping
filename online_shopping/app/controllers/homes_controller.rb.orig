class HomesController < ApplicationController

  def index
  	@categories = Category.all
  end

  def show
  	@product = Product.find(1)
  end
 
  def generate_bill

  	if !user_signed_in?
  		redirect_to new_user_session_path
  	else
      total_amount = params[:total_amount]      
  		redirect_to bills_create_path :total_amount => total_amount
      
  	end
  end

  def subcategory
    p params[:id]
  	category_id=Category.find_by_name(params[:id]).id
    @categories = Category.where(parent_id: category_id)
    @products = Product.where(category_id: category_id)
    @cat_name = params[:id]
  end

<<<<<<< HEAD
  def check_availabilty()
    p "hello"
    msg=''
    session[:temporary_shopping_cart].each do |product_hash|
    p product_id=product_hash.keys[0]
    p available_quantity = ProductDetail.where(product_id: product_id, available: 1).count
    p requested_quantity = product_hash.values[0]
     if (requested_quantity>available_quantity)
      p msg =  "#{msg}#{Product.find(product_id).name} available are #{available_quantity} "
     end
    end
    return msg
=======
  def category_product
    category_id=Category.find_by_name(params[:id]).id
    @products = Product.where(category_id: category_id)
    @cat_name = params[:id]
  end

  def product_info
    product_id=Product.find_by_name(params[:id]).id
    @product = Product.find(product_id)
>>>>>>> a7fb5b58db965ce6b2f3c26e157f780e420b519c
  end
end
